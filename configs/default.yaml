# ============================================================
# HH Reservoir Computing — Default Configuration
# ============================================================

neuron:
  model: "hh"                  # "hh" or "hh_a" (with A-current)
  C_m: 1.0                    # µF/cm² — membrane capacitance
  g_Na: 120.0                 # mS/cm² — max sodium conductance
  g_K: 36.0                   # mS/cm² — max potassium conductance
  g_L: 0.3                    # mS/cm² — leak conductance
  E_Na: 50.0                  # mV — sodium reversal potential
  E_K: -77.0                  # mV — potassium reversal potential
  E_L: -54.4                  # mV — leak reversal potential
  V_rest: -65.0               # mV — resting potential
  # A-current (Connor-Stevens) — used only if model == "hh_a"
  g_A: 47.7                   # mS/cm² — max A-current conductance
  E_A: -75.0                  # mV — A-current reversal potential

network:
  N: 100                       # number of neurons
  connection_prob: 0.2         # sparse connectivity probability
  ei_ratio: 0.8                # fraction of excitatory neurons (Dale's law)
  w_exc_mean: 1.2              # µA/cm²
  w_exc_std: 0.24
  w_inh_mean: 6.0              # µA/cm²
  w_inh_std: 1.2
  inh_scaling: 1.0             # inhibitory weight scaling factor
  spectral_radius: 0.95        # CORRECTED SCIENTIFIC VALUE: < 1.0 for true stability

synapse:
  model: "current"             # "current" or "conductance"
  tau_exc: 5.0                 # ms — excitatory synaptic time constant (AMPA)
  tau_inh: 10.0                # ms — inhibitory synaptic time constant (GABA_A)
  E_syn_exc: 0.0               # mV
  E_syn_inh: -80.0             # mV

input:
  encoding: "poisson"
  base_rate: 5.0               # Hz
  input_gain: 40.0             # Hz
  input_fraction: 0.3
  input_density: 0.3
  symbol_duration: 20.0        # ms
  input_weight: 8.0            # Waga impulsu

integration:
  method: "rk4"                # "rk4" only
  dt: 0.01                     # ms — integration time step
  dt_verification: 0.005       # ms — for dt-sensitivity test

simulation:
  washout: 200.0                # ms
  duration: 2000.0             # ms — total simulation time (incl. washout)

lyapunov:
  delta_0: 1.0e-6              # initial perturbation magnitude
  renorm_period: 2.0           # ms — re-normalization interval
  washout: 500.0               # ms — Lyapunov-specific washout
  measurement_window: 500.0    # ms — measurement window after washout
  n_repeats: 1                 # number of perturbation repeats (median)
  stability_threshold: 0.3     # max std between repeats for "stable" estimate

calibration:
  method: "hybrid"             # "hybrid" = dense_scan + brentq + recovery
  dense_n_points: 12           # number of points in dense scan
  dense_range_min: 0.1         # min inh_scaling for scan
  dense_range_max: 2.5         # max inh_scaling for scan
  brentq_xtol: 0.01            # tolerance for brentq
  brentq_maxiter: 50           # max iterations for brentq
  stable_target_lambda: -1.0   # target λ for stable regime selection
  chaos_target_lambda: 1.0     # target λ for chaotic regime selection

readout:
  feature: "firing_rate"       # "firing_rate" | "voltage" | "concat_k" | "mean_window"
  tau_readout: 20.0            # ms — exponential filter time constant
  concat_k: 5                  # number of frames to concatenate (if concat_k)
  downsample_factor: 10        # downsampling factor for features
  models:
    - "ridge"                  # ridge regression (for MC, NARMA)
    - "logreg"                 # logistic regression (for XOR)
    - "linear_svm"             # linear SVM (for XOR)
  alpha_range: [-6, 6]         # logspace range for ridge α
  C_range: [-4, 4]             # logspace range for logreg/SVM C
  n_alphas: 20                 # number of hyperparameter values to try
  train_fraction: 0.6          # proportion for training
  val_fraction: 0.2            # proportion for validation
  test_fraction: 0.2           # proportion for testing

benchmarks:
  mc:
    K_max: 20
    threshold: 0.01
    input_range: [-0.5, 0.5]
    sequence_length: 1000
    # MC requires high temporal precision -> FAST SYMBOLS
    input_override:
      symbol_duration: 20.0
      input_gain: 40.0

  narma10:
    order: 10
    input_range: [0.0, 0.5]
    sequence_length: 2000
    metric: "nrmse"
    # NARMA requires integration of nonlinearity -> SLOW SYMBOLS
    input_override:
      symbol_duration: 50.0   # HH needs time to integrate dynamics
      input_gain: 40.0

  delayed_xor:
    delay: 3
    sequence_length: 1000
    metric: "accuracy"
    delay_steps: 2
    # XOR is a logic task -> MEDIUM SYMBOLS
    input_override:
      symbol_duration: 30.0
      input_gain: 40.0

plausibility:
  min_firing_rate: 1.0         # Hz — Br00
  max_firing_rate: 100.0       # Hz — physiological limit
  min_active_fraction: 0.20    # Br00
  max_synchrony: 0.60          # Br00
  max_V: 100.0                 # mV — physical limit
  min_cv_isi: 0.3              # SK93
  max_cv_isi: 2.0              # SK93

experiment:
  seeds_count: 30              # number of independent topology seeds
  N_values: [100, 150, 200]    # network sizes to test
  seed_input: 42               # fixed input seed for comparisons
  seed_base: 1000              # base for topology seeds: 1000, 1001, ..., 1029

output:
  results_dir: "results"       # directory for results
  frozen_dir: "frozen"         # directory for frozen topologies
  csv_per_run: true            # save per-run CSV
  csv_aggregate: true          # save aggregate CSV
